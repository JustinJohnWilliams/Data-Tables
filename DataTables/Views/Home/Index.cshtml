@{
    ViewBag.Title = "Index";
}

<h2>Customers</h2>

<table id="sampleTable" class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>
                Name
            </th>
            <th>
                Email
            </th>
            <th>
                Address
            </th>
            <th>
                Phone
            </th>
            <th>
                Active
            </th>
            <th>
                Actions
            </th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

<script type="text/javascript">

    $(document).ready(function () {
        $('#sampleTable').dataTable({
            "aaSorting": [[0, "desc"]],
            "sDom": "<'row'<'span5'l><'span6'f>r>t<'row'<'span5'i><'span6'p>>",
            "sPaginationType": "bootstrap",
            "bProcessing": true,
            "bServerSide": true,
            "bSort": true,
            "bSortClasses": true,
            "bPaginate": true,
            "sAjaxSource": '@Url.Action("Query")',
            "aoColumns": [
                        {
                            "sName": "Name",
                            "bSortable": true,
                            "fnRender": function (oObj) {
                                return oObj.aData[0];
                            }
                        },
                        {
                            "sName": "Email",
                            "bSortable": true,
                            "fnRender": function (oObj) {
                                return oObj.aData[1];
                            }
                        },
                        {
                            "sName": "Address",
                            "bSortable": true,
                            "fnRender": function (oObj) {
                                return oObj.aData[2];
                            }
                        },
                        {
                            "sName": "Phone",
                            "bSortable": true,
                            "fnRender": function (oObj) {
                                return oObj.aData[3];
                            }
                        },
                        {
                            "sName": "Active",
                            "bSortable": true,
                            "fnRender": function (oObj) {
                                return oObj.aData[4];
                            }
                        },
                        {
                            "sName": "Actions",
                            "bSortable": false,
                            "fnRender": function (oObj) {
                                var retVal = '';
                                if (oObj.aData[5] != null) {
                                    showHideActionsColumn(true);
                                    retVal = '<a href=\"javascript:alertDelete();\">delete</a>';
                                } else {
                                    showHideActionsColumn(false);
                                }

                                return retVal;
                            }
                        }
                    ]
        });
    });

    function showHideActionsColumn(show) {
          var table = $('#sampleTable').dataTable();

          table.fnSetColumnVis(5, show);  
    };

    function alertDelete() {
        alert('you deleted something');  
    };


</script>